<template name="stack">
  <div class="Stack contentMargins" id="{{_id}}">
    <div class="StackHeader stackSortHandle clearfix" id="{{_id}}">
      <img class="fbOwnerImage" title="{{$userNameByUserId userId}}" alt="{{$userNameByUserId userId}}" src="{{$fbImageByUserId userId}}"/>
      <div class="StackHeader">
        <div class="StackTitle">
          {{name}}
          <div class="StackEditButton">
            <span class="glyphicon glyphicon-pencil"></span>
          </div>
        </div>  
        <form class='StackEditForm hidden'>
          <div class="form-group">
              <input type="text" class="form-control StackEditInput" value="{{name}}"/>
          </div>
          <div class="form-group">
            <textarea class="form-control StackEditDescInput" rows="3" text="{{description}}"></textarea>
          </div>
          <div class="form-group">
            <button type="button" class="btn btn-default btn-sm StackEditSubmit"><span class="glyphicon glyphicon-ok"></span></button>
            <button type="button" class="btn btn-default btn-sm StackEditCancel"><span class="glyphicon glyphicon-remove"></span></button>
            <button type="button" class="btn btn-default btn-sm StackRemove"><span class="glyphicon glyphicon-trash"></span></button>
          </div>
        </form>

        <div class="stackButtonDock">
          {{#each collaboratorsMap this}}
            {{>stackCollaborator this}}
          {{/each}}

          <button class="noStyling stackIcon StackShare">
            <div class="glyphContainer">
              <span class="glyphicon glyphicon glyphicon-user"></span>
              <span class="glyphicon glyphicon-plus-sign" style="position: absolute; top:5px;left:13px; font-size:9px;"></span>
            </div>
          </button>
        </div>
      </div>
      
      <div class="StackShareInput hidden">
        <input placeholder="Add contributor..." 
            autocomplete="on" spellcheck="off"
            data-source="contributors" />
      </div>
    </div>
    {{#if description}}
      <div class="StackDescription">{{description}}</div>
    {{/if}}
    <div class="StackBody">      
      {{>tasks this}}
      {{>stackFooter this}}
    </div>  
  </div>
</template>